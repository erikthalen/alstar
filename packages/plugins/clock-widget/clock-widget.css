#clock_widget {
  background: #0b0b0b;
  border: 1px solid #1f1f1f;

  main {
    display: grid;
    gap: min(4cqi, 16px);
    padding: min(8cqi, 11px);

    @container widget (width > 75px) {
    }

    @container widget (width > 140px) {
      grid-template-columns: max(33%, 50px) 1fr;
    }
  }

  .clock {
    --_w: 100cqi;
    --_r: calc((var(--_w) - var(--_sz)) / 2);
    --_sz: 20cqi;

    container-name: clock;
    container-type: inline-size;

    display: grid;
    place-content: center;

    block-size: 100%;
    inline-size: 100%;

    color: #222;
  }

  .clock-face {
    aspect-ratio: 1;
    background: var(--_bgc, #e6e6e6);
    border-radius: 50%;
    block-size: var(--_w);
    font-size: 12cqi;
    font-weight: 700;
    list-style-type: none;
    inline-size: var(--_w);
    padding: unset;
    position: relative;

    @container widget (width > 75px) {
      corner-shape: round;
      border-radius: 50%;
      font-size: 12cqi;
    }
  }

  .clock-face:after {
    --start: 47cqi;
    --height: 20cqi;

    content: '';
    position: absolute;
    inset: 0;
    z-index: 0;
    border-radius: inherit;

    background: repeating-conic-gradient(from 0deg, #a5a5a5 -1deg 1deg, transparent 1deg 5deg);
    mask-image: radial-gradient(
      transparent var(--start),
      black var(--start) calc(var(--start) + var(--height)),
      transparent calc(var(--start) + var(--height))
    );

    opacity: 0;

    @container widget (width > 75px) {
      opacity: 1;
    }
  }

  .clock-face time {
    --_x: calc(var(--_r) + (var(--_r) * cos(var(--_d))));
    --_y: calc(var(--_r) + (var(--_r) * sin(var(--_d))));
    display: grid;
    height: var(--_sz);
    left: var(--_x);
    place-content: center;
    position: absolute;
    top: var(--_y);
    width: var(--_sz);
  }

  .clock-face time:nth-child(1) {
    --_d: 270deg;
  }
  .clock-face time:nth-child(2) {
    --_d: 300deg;
  }
  .clock-face time:nth-child(3) {
    --_d: 330deg;
  }
  .clock-face time:nth-child(4) {
    --_d: 0deg;
  }
  .clock-face time:nth-child(5) {
    --_d: 30deg;
  }
  .clock-face time:nth-child(6) {
    --_d: 60deg;
  }
  .clock-face time:nth-child(7) {
    --_d: 90deg;
  }
  .clock-face time:nth-child(8) {
    --_d: 120deg;
  }
  .clock-face time:nth-child(9) {
    --_d: 150deg;
  }
  .clock-face time:nth-child(10) {
    --_d: 180deg;
  }
  .clock-face time:nth-child(11) {
    --_d: 210deg;
  }
  .clock-face time:nth-child(12) {
    --_d: 240deg;
  }

  .arm {
    background-color: var(--_abg);
    border-radius: calc(var(--_aw) * 2);
    display: block;
    height: var(--_ah);
    position: absolute;
    left: calc((var(--_w) - var(--_aw)) / 2);
    top: calc((var(--_w) / 2) - var(--_ah));
    transform: rotate(0deg);
    transform-origin: bottom;
    width: var(--_aw);
  }
  .seconds {
    --_abg: rgb(255, 140, 5);
    --_ah: 48cqi;
    --_aw: 4cqi;

    z-index: 1;

    @container widget (width > 75px) {
      --_aw: 3cqi;
    }

    &:before {
      content: '';
      position: absolute;
      width: calc(var(--_aw) / 1.5);
      height: 15cqi;
      background-color: inherit;
      border-radius: inherit;

      top: 100%;
      left: 50%;
      translate: -50% 0;
    }

    &:after {
      content: '';
      position: absolute;
      width: calc(var(--_aw) * 2.5);
      aspect-ratio: 1;
      background-color: inherit;
      border-radius: 100%;

      top: 100%;
      left: 50%;
      translate: -50% -50%;
    }
  }

  .minutes {
    --_abg: #333;
    --_ah: 45cqi;
    --_aw: 4cqi;

    @container widget (width > 75px) {
      --_aw: 3cqi;
    }

    &:before {
      content: '';
      position: absolute;
      width: var(--_aw);
      height: 5cqi;
      background-color: inherit;
      border-radius: inherit;

      top: 100%;
      left: 50%;
      translate: -50% 0;
    }
  }

  .hours {
    --_abg: #333;
    --_ah: 6cqi;
    --_aw: 1.5cqi;

    @container (width > 75px) {
      --_aw: 1cqi;
    }

    position: relative;

    &:before {
      content: '';
      position: absolute;
      width: calc(var(--_aw) * 3);
      height: 25cqi;
      background-color: inherit;
      border-radius: inherit;

      bottom: 90%;
      left: 50%;
      translate: -50% 0;
    }
  }

  @supports not (left: calc(1px * cos(45deg))) {
    time {
      left: 50% !important;
      top: 50% !important;
      transform: translate(-50%, -50%) rotate(var(--_d)) translate(var(--_r))
        rotate(calc(-1 * var(--_d)));
    }
    p {
      display: block;
    }
  }
}

.calendar {
  display: inline-block;
  font-size: 5cqi;
  letter-spacing: 0.05em;

  @container widget (width < 141px) {
    display: none;
  }

  .weekdays,
  .grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
  }

  .weekdays {
    display: none;
  }

  .weekdays div {
    display: grid;
    aspect-ratio: 1;
    place-content: center;
  }

  .cell {
    display: flex;
    align-items: center;
    justify-content: center;
    aspect-ratio: 1;
  }

  .today {
    background: #ff3b25;
    color: white;
    border-radius: 50%;
  }
}
